\chapter{State of the Art}

\section{Trusted Platform Module}
The Trusted Platform Module is a system component used as a cryptographic co-processor. It was developed by and standardized by the Trusted Computing Group (TCG) consortium with the purpose of laying a foundation on which secure systems could be further created and developed. 

\subsection{History}
The first broadly used specification was TPM 1.1b, released in 2003. TPMs released under this specification already provided some essential functions found in modern TPMs consisting of key generation of RSA key pairs, storage, secure authorisation, and device-health attestation. For the sake of assuring privacy, the
use of anonymous identity keys based on certificates was introduced. In order to take advantage of such
functionality, these certificates needed to be provided with the TPM, and any generation of such keys was available only after owner authorisation. To be able to anonymously prove the origin of the keys generated
by TPM, a \texttt{privacy certification authority} was created. The integrity of measurements collected during systems boot sequence is provided by Platform Configuration Registers (PCRs). Both PCRs and identity keys might have been used to prove the health of the system's boot sequence~\cite{arthur2015practical}.


The hardware specification was not standardized in TPM 1.1b. This caused various incompatibilities. The TPMs across different vendors provided differing interfaces, which required different drivers. Pin-outs on the chips were not prescribed by any standard. Additionally, there were no countermeasures against dictionary attacks~\cite{arthur2015practical}.
% Should i also mention DAA ?

While being in development from 2005 to 2009, the TPM 1.2 specification went through numerous releases. Regarding the need to store shipped certificates for TPM's endorsement keys on a hard disk, about 2KB of non-volatile RAM was added. A new design needed to be made to support key migration between different TPMs because the old design of key migration would in TPM 1.12 require users to have TPM owner authorization. The new idea made users able to create migratable keys and then relied on a designated third party that could exclusively migrate such keys. Said keys could also be certified. Thus, they were called Certified Migratable keys. Additionally, an internal timer able to synchronize with the external one was added in 1.12, which has its use when signing data due to timestamps. Version 1.12 required API to provide backward compatibility for 1.1b. This increased the complexity of the new specification. The TPM 1.12 became widely used in x86 personal computers starting 2005 and later in 2008 also in servers~\cite{arthur2015practical}.

One of the factors that contributed to the need for yet another specification after TPM 1.12 was that in 2005, some substantial collision attacks were found against the SHA-1 hash function. Analysis regarding the use of SHA-1 in TPM revealed the attacks not being applicable~\cite{tcg_tpm1.12_sha-1_uses}. Due to the extensive use of SHA-1 in TPM 1.12, the new specification had to permit any hashing algorithm without the need to make any changes to the specification. A so-called \texttt{digest agility}. Another problem was the lack of a symmetric algorithm required in the TPM specification. The use of RSA for encryption of serialized data was impractical because RSA operations are slow. Neither would help support bigger-sized RSA keys because that would cause a higher chip cost, incompatibility issues, and lower performance. That's why it was decided that the following specification would adopt support for symmetric encryption, which is faster and more suitable for encryption of large byte streams. Having this many problems, an overhaul of the specification would be convenient. And the architects of TPM 2.0 took advantage of the situation~\cite{arthur2015practical}.


\subsection{Features}


\section{Performance analysis}
\subsection{tpm2-algtest}
The \texttt{tpm2-algtest}\footnote{https://github.com/crocs-muni/tpm2-algtest} is a tool for automatic gathering of information about the TPM2 devices \cite{Struk2019thesis}. The tool uses libraries implementing Trusted Computing Group's TPM2 Software Stack\footnote{https://github.com/tpm2-software/tpm2-tss} which allows for simplification of development when programming applications supposed to interact with the TPM. The tool tests for support of specific commands and supporting routines, values of structures defined in the TPM 2.0 specification \cite{tcg_p3_commands, tcg_p4_supproutines, tcg_p2_structures}. Supported cryptographic algorithms are also subject to performance analysis where the time to execute such an algorithm is repeatedly measured and recorded. Additionally, the tool uses the TPM to generate key pairs for RSA and ECC-based algorithms so that they can be further analyzed by various means.